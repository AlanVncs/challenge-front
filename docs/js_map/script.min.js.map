{"version":3,"sources":["script.ts"],"names":[],"mappings":"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","file":"../ts/script.min.js","sourcesContent":["// Interfaces\ninterface MenuItem {name:string, url:string, children:Array<MenuItem>};\ninterface Product {productId:number, name:string, salesChannel:number, available: boolean, bestPriceFormated:string, bestPrice:number, quantity:number, image:string};\ninterface Items {item: Array<Product>};\ninterface Cart {cart: Items};\n\n\n// Elements\nconst $toggleMenu    = <HTMLInputElement> document.getElementById(\"toggle-menu\");\nconst $menuContainer = <HTMLDivElement> document.getElementById('menu-container');\nconst $cartImg       = <HTMLImageElement> document.getElementById('cart');\nconst $cartContent   = <HTMLDivElement> document.getElementById('cart-content');\nconst $cartProducts  = <HTMLDivElement> document.getElementById('cart-products');\nconst $cartSum       = <HTMLDivElement> document.getElementById('cart-sum');\n\n\nsetMenuView();\nsetCartView();\n\n\n\n// Faz o request e exibe o conteúdo do carrinho\n// esconde o carrinho se já estiver sendo exibido\n$cartImg.addEventListener('click', async event => {\n    event.stopPropagation();\n    $toggleMenu.checked = false;\n    toggleCartView();\n    // if(){\n    //     // TODO exibir animação de loading\n    //     const cart = await requestCartData();\n    //     setCartView(cart);\n    // }\n});\n\n// Clicar na página (fora do carrinho), esconde o conteúdo\n// do carrinho\ndocument.addEventListener('click', event => {\n    toggleCartView(true);\n});\n\n// Evita que um clique no conteúdo do carrinho seja entendido\n// como um clique na página\n$cartContent.addEventListener('click', event => {\n    event.stopPropagation();\n});\n\n\n\n\n\n// Alterna a visibilidade do conteúdo do carrinho\n// Necessariamente esconde se 'flag' for true\nfunction toggleCartView(flag?: boolean){\n    if(flag || $cartContent.classList.contains(\"visible\")){\n        $cartContent.classList.remove(\"visible\");\n    }\n    else{\n        $cartContent.classList.add(\"visible\");\n    }\n}\n\n// Faz uma requisição e retorna o conteúdo do carrinho\nasync function requestCartData(): Promise<Cart>{\n    return new Promise(async resolve => {\n        const data = await fetch(\"data/products.json\");\n        resolve(await data.json());\n    });\n}\n\n// Faz uma requisição e retorna o conteúdo do menu\nasync function requestMenuData(): Promise<Array<MenuItem>> {\n    return new Promise(async resolve => {\n        const data = await fetch(\"data/menu.json\");\n        resolve(await data.json());\n    });\n}\n\n\n\n\n\n// Cria um elemento com as classes especificadas\nfunction createElement(tagName, classArray?): Element {\n    const $element = document.createElement(tagName);\n    if(classArray) $element.classList.add(...classArray);\n    return $element;\n}\n\n// Cria um produto\nfunction createProductElement(product: Product): Element{\n    const $product       = createElement('div', ['product']);\n    const $productImg    = createElement('img', ['product-img']);\n    const $productInfo   = createElement('div', ['product-info']);\n    const $productName   = createElement('div', ['product-name']);\n    const $productStatus = createElement('div', ['product-status']);\n    const $productQtd    = createElement('div', ['product-qtd']);\n    const $productPrice  = createElement('div', ['product-price']);\n\n    $productImg.setAttribute('src', product.image);\n    $productName.append(product.name);\n    $productQtd.append(`Qtd.: ${product.quantity}`);\n    $productPrice.append(product.bestPriceFormated);\n    $productStatus.append($productQtd, $productPrice);\n    $productInfo.append($productName, $productStatus);\n    $product.append($productImg, $productInfo);\n\n    return $product;\n}\n\n// Injeta as informações dos produtos na view\nasync function setCartView(){\n    const {cart}:Cart = await requestCartData();\n    $cartProducts.innerHTML = '';\n    let sum = 0;\n    cart.item.forEach(product => {\n        const $product = createProductElement(product);\n        $cartProducts.appendChild($product);\n        $cartProducts.appendChild(createElement('div', ['hr-line'])); // Linha entre os produtos\n        sum += product.bestPrice*product.quantity;\n    });\n    $cartSum.innerText = `R$ ${(sum/100).toLocaleString('pt-br')}`;\n}\n\n\n\n\n\n\n\n\n\n\n// Cria um link (<a>) \nfunction createLinkElement(menuItem: MenuItem): Element {\n    const $element = createElement('a');\n    $element.append(menuItem.name);\n    $element.setAttribute('href', menuItem.url);\n    return $element;\n}\n\n// Cria um item do menu\nfunction createMenuItemElement(menuItem: MenuItem): Element {\n    const $menuItem = createElement('li');\n    $menuItem.appendChild(createLinkElement(menuItem));\n    if(menuItem.children && (menuItem.children.length != 0)){\n        const $subMenu = createMenuElement(menuItem.children);\n        $menuItem.appendChild($subMenu);\n    }\n    return $menuItem;\n}\n\nfunction createMenuElement(menu: Array<MenuItem>): Element {\n    const $menu = createElement('ul');\n    menu.forEach(menuItem => {\n        $menu.appendChild(createMenuItemElement(menuItem));\n    });\n    return $menu;\n}\n\n// Injeta as informações no menu\nasync function setMenuView(){\n    const menu = await requestMenuData();\n    const $menu = createMenuElement(menu);\n    $menuContainer.appendChild($menu);\n}\n"]}